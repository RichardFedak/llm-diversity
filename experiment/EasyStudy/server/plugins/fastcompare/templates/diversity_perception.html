{% include 'header.html' %}
<style>
  .movie-wrapper {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    cursor: default;
    display: flex;
    flex-flow: column;
  }
</style>
<div id="app">
  <b-container fluid>
    <b-jumbotron lead="Rate the diversity of movie pairs" class="smallJumbotron" header="Diversity perception">
      You are presented with 5 pairs of movies. For each pair, please select a rating from 1 to 5 based on <strong>how
        diverse you perceive the pair</strong> to be.
      A rating of 1 indicates little or no diversity, while a rating of 5 indicates a high degree of diversity.
      You can <strong>hover over a movie</strong> to see more information about it.
      Please provide <strong>honest and thoughtful</strong> ratings.
    </b-jumbotron>

    <div v-for="(pair, pairIndex) in pairs" :key="'pair-' + pairIndex" class="mb-4 mt-4">
      <b-row align-h="center mb-2">
        <b-col cols="auto" v-for="(col, index) in pair.movies" :key="col.movie_id">
          <div class="movie-wrapper" :id="col.movie_id" :title="col.movieTooltip"
            v-b-tooltip.html.hover="{ title: col.movieTooltip }">
            <b-img :src="col.url" :alt="col.movieTooltip" fluid center class="custom-image"></b-img>
            <div v-text="col.movieTitle" class="movie-title pb-1 m-auto"></div>
          </div>
        </b-col>
      </b-row>

      <b-row align-h="center" class="mb-3">
        <b-col cols="auto">
          <b-form-group label="How diverse are these movies?" :label-for="'radio-rating-' + pairIndex"
            label-align="center">
            <b-form-radio-group :id="'radio-rating-' + pairIndex" :name="'rating_' + pairIndex"
              v-model="ratings[pairIndex]" :state="ratings[pairIndex] !== null" buttons button-variant="outline-primary"
              class="responsive-radio-group">
              <b-form-radio :value="1">1 - No diversity</b-form-radio>
              <b-form-radio :value="2">2</b-form-radio>
              <b-form-radio :value="3">3 - Moderate</b-form-radio>
              <b-form-radio :value="4">4</b-form-radio>
              <b-form-radio :value="5">5 - High diversity</b-form-radio>
            </b-form-radio-group>
          </b-form-group>
        </b-col>
      </b-row>

      <hr>
    </div>

    <b-row align-h="center" class="mt-4">
      <b-col cols="3">
        <b-btn :disabled="!isFormValid" variant="primary" block @click="submit">Submit</b-btn>
      </b-col>
    </b-row>
  </b-container>
</div>

<script>
  var initial_data_url = "{{ initial_data_url }}";
  var continuation_url = "{{ continuation_url }}";
  var csrfToken = "{{ csrf_token() }}";
</script>

{{ emit_assets('fastcompare','diversity_perception.js') }}
{% include 'footer.html' %}